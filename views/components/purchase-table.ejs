<div class="card">
  <div class="card-body">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Produk</th>
            <th>Jumlah</th>
            <th>Total Harga</th>
            <th>Status</th>
            <th>Tanggal</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          <% purchases.forEach(purchase => { %>
          <tr>
            <td><%= purchase.id %></td>
            <td><%= purchase.produk_nama %></td>
            <td><%= purchase.jumlah %></td>
            <td class="currency">Rp <%= purchase.total_harga.toLocaleString('id-ID') %></td>
            <td>
              <span class="badge <%= purchase.status === 'active' ? 'bg-success' : 'bg-danger' %>"> <%= purchase.status === 'active' ? 'Aktif' : 'Dibatalkan' %> </span>
            </td>
            <td><%= new Date(purchase.created_at).toLocaleDateString('id-ID') %></td>
            <td>
              <% if (purchase.status === 'active') { %>
              <button class="btn btn-sm btn-outline-danger" onclick="cancelPurchase(<%= purchase.id %>)"><i class="fas fa-times"></i> Batalkan</button>
              <% } else { %>
              <span class="text-muted">-</span>
              <% } %>
            </td>
          </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</div>
